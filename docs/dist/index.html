<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>ECMPS Beta API Examples</title>
    <link rel="stylesheet" type="text/css" href="./assets/css/styles.css">
    <style>
        .note-style {
          font-size: 0.8em;
          color: #666;
        }
        .code-style {
          padding: 0.5em; 
          border:1px solid #ccc; 
          background: rgb(230, 230, 230);
          text-wrap: wrap;
        }
        .response-style {
          display: block; 
          overflow-x: auto; 
          padding: 0.5em; 
          background: rgb(51, 51, 51); 
          color: white; 
          margin: 0;
        }
      </style>
  </head>
  <body>
    <main>
      <div class="margin-5">
        <h1>Clean Air Markets ECMPS Beta API Examples</h1>
        <p>Below are some examples of how the ECMPS Beta API endpoints could be used to find useful information you may be looking for.</p>
        
        <ol class="usa-process-list">
            <li class="usa-process-list__item" style="max-width: none;">
                <h4 class="usa-process-list__heading">Use an Oris Code (Facility Id) to get a monitoring plan configuration</h4>
                <p>The best place to start for most people is with the <b>configurations endpoint</b> in the <a target="_blank" href="https://www.epa.gov/power-sector/cam-api-portal#/swagger/beta-monitor-plan-mgmt">Monitoring Plan API</a>.
                <p>Below is a javascript example script making a call to the configurations endpoint using oris code 3 (Barry).</p>
                <pre class="code-style">
<code>const response = await fetch('https://api.epa.gov/easey/beta/monitor-plan-mgmt/configurations?orisCodes=3',
{
    headers: {
        "x-api-key": "YOUR_API_KEY_HERE"
    },
    referrerPolicy: "no-referrer",
    "method": "GET",
});
const data = await response.json();</code></pre>
        
                <p>Below is the resonse.</p>
            
                <div class="height-mobile border-1px" style="overflow:auto;">
                    <pre id="monitoring-plan-config-response" class="response-style">
                    loading...
                    </pre>
                </div>
            </li>
            <li class="usa-process-list__item" style="max-width: none;">
                <h4 class="usa-process-list__heading">Chose a monitoring plan id to get emissions exports</h4>
                <p>The first "Id" of each object in the response is the unique identifier (Id) of a monitoring configuration record. You will see this as parameters 
                    to use in other endpoints (named: monitorPlanId, monPlanIds or planIds). For example, lets take the fifth monitoring plan id in the response above and use it.</p>
                <span class="note-style">Note: We use the fifth monitoring plan because this is a simple stack configuration.</span>
                <pre class="code-style"><code>const monPlanId = <span id="monitoring-plan-id"></span></code></pre>
                
                <p>Below is a javascript example script.</p>
                <pre class="code-style">
<code>const response = await fetch('<div id="emissions-export-url"></div>',
{
    headers: {
        "x-api-key": "YOUR_API_KEY_HERE"
    },
    referrerPolicy: "no-referrer",
    "method": "GET",
    });
const data = await response.json();</code></pre>
            
                <p>Below is the resonse.</p>
                
                <div class="height-mobile border-1px" style="overflow:auto;">
                    <pre id="emissions-export-response" class="response-style">
                    loading...
                    </pre>
                </div>
            </li>
          </ol>
        
        </div>
    </main>
    <script src="main.js"></script>
  </body>
</html>
